!function(){var t={247:function(t,e){var o,n,a;n=[],void 0===(a="function"==typeof(o=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function e(t,e){return-1===t.indexOf(e)?t.length:t.indexOf(e)}function o(t){var o=t.replace(/^v/,"").replace(/\+.*$/,""),n=e(o,"-"),a=o.substring(0,n).split(".");return a.push(o.substring(n+1)),a}function n(t){return isNaN(Number(t))?t:Number(t)}function a(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}function i(t,e){[t,e].forEach(a);for(var i=o(t),r=o(e),l=0;l<Math.max(i.length-1,r.length-1);l++){var s=parseInt(i[l]||0,10),c=parseInt(r[l]||0,10);if(s>c)return 1;if(c>s)return-1}var d=i[i.length-1],p=r[r.length-1];if(d&&p){var u=d.split(".").map(n),m=p.split(".").map(n);for(l=0;l<Math.max(u.length,m.length);l++){if(void 0===u[l]||"string"==typeof m[l]&&"number"==typeof u[l])return-1;if(void 0===m[l]||"string"==typeof u[l]&&"number"==typeof m[l])return 1;if(u[l]>m[l])return 1;if(m[l]>u[l])return-1}}else if(d||p)return d?-1:1;return 0}var r=[">",">=","=","<","<="],l={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function s(t){if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===r.indexOf(t))throw new TypeError("Invalid operator, expected one of "+r.join("|"))}return i.validate=function(e){return"string"==typeof e&&t.test(e)},i.compare=function(t,e,o){s(o);var n=i(t,e);return l[o].indexOf(n)>-1},i})?o.apply(e,n):o)||(t.exports=a)}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports}o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var n={};!function(){"use strict";o.d(n,{er:function(){return R},JJ:function(){return W}});let t=window.Shopify?window.Shopify.shop:"";let e=window.Shopify?window.Shopify.shop:"",a='button[class*="increase"], button[name="plus"], button[class*="quantity-selector-toggle"], button[class*="qty__adjust--plus"], *[class*="quantity-up"], .ajaxcart__qty--plus, button[class*="plus"], .cart--plus';function i(){return fetch("/cart.js",{method:"GET",headers:{Accept:"application/json"}}).then((t=>t.json()))}async function r(t="",e={}){const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return{data:await o.json()}}async function l(t){await r("/cart/change.js",t)}async function s(){let t=(await i()).items.map((t=>{let e=t.properties;return{variant_uuid:t.id,timestring:e&&e._start_time?e._start_time:null,team_member_id:e&&e._team_member_id?e._team_member_id:null,quantity:t.quantity}})),o=await r("https://app.appointo.me/scripttag/validate_cart",{data:t,shopify_domain:e});if(o.data){let t=!1;if(o.data){if(!o.data.validate_cart)return;o.data.data.map(((e,o)=>{e.exists_in_appointo&&(e.is_available?e.actual_quantity>e.max_quantity&&(l({line:o+1,quantity:e.max_quantity}),t=!0):(l({line:o+1,quantity:0}),t=!0))}))}t&&(window.alert("Items in the cart has been updated due to changes in availability of the timeslots chosen"),setTimeout((()=>{window.location.reload()}),3e3))}}"kits-uk.myshopify.com"!==e&&function(){const t=window.XMLHttpRequest.prototype.open;function e(){return this.addEventListener("load",(function(){["/cart/add.js","/cart/change.js"].includes(this._url)&&o(JSON.parse(this.response))})),t.apply(this,arguments)}function o(){s(),p()}window.XMLHttpRequest.prototype.open=e,function(t,e){"function"==typeof e&&(t.fetch=function(){const t=e.apply(this,arguments);return t.then((t=>{[`${window.location.origin}/cart/add.js`,`${window.location.origin}/cart/change.js`].includes(t.url)&&t.clone().json().then((t=>o(t)))})),t})}(window,window.fetch)}();const c=["art-of-pure.myshopify.com","wildschytz.myshopify.com"],d=["urban-glow-cosmetics.myshopify.com"];async function p(){if(c.includes(e))return;let t=await i();t&&t.items.length>0&&document.querySelectorAll("form[action='/cart'][method='post'], .cart-item-list").forEach((function(o){let n=o.querySelectorAll("input[type=number]");if(0===n.length&&(n=o.querySelectorAll('input[class*="js-qty"]')),0===n.length&&(n=o.querySelectorAll("input[type=text]")),n.length===t.items.length){t.items.map(((t,e)=>{u(t,e,n)}));const e=o.querySelectorAll(a);t.items.map(((t,o)=>{u(t,o,e)}))}else if(n.length/t.items.length==2){t.items.map(((t,e)=>{u(t,2*e,n),u(t,2*e+1,n)}));const e=o.querySelectorAll(a);t.items.map(((t,o)=>{u(t,2*o,e),u(t,2*o+1,e)}))}else if(d.includes(e)){t.items.map(((t,e)=>{u(t,3*e,n),u(t,3*e+1,n),u(t,3*e+2,n)}));const e=o.querySelectorAll(a);t.items.map(((t,o)=>{u(t,3*o,e),u(t,3*o+1,e),u(t,3*o+2,e)}))}else console.log("something is weird ---\x3e check",n,t.items)}))}function u(t,e,o){if(t&&t.properties){t.properties._start_time&&(n=o[e])&&(n.style.opacity=.4,n.style.cursor="not-allowed",n.style.pointerEvents="none","BUTTON"!==n.tagName&&"INPUT"!==n.tagName||"Symmetry"!==(typeof Shopify<"u"&&Shopify.theme&&Shopify.theme.name?Shopify.theme.name:"Unknown")&&n.setAttribute("disabled",!0))}var n}var m=o(247);let f={};const y="https://app.appointo.me";let h="",w={},g=[],b=window.Shopify?window.Shopify.shop:"",_=null,v=null,j=!1,A="popup",S=!1,$=!1,T=!1,q=[],E=!1,x="",k=!1,C=null,P=!1,I=!1,L="https://app.appointo.me/popups-main-v2.js";const B=[1844456587327];function M(t){return new Promise((e=>{t=t||2e3,setTimeout((function(){e()}),t)}))}const O=["choraltracks-com.myshopify.com"];function N(){let t=(e={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,o,n){e[o]=n})),e).variant;var e;return t||(!function(){const t=window.location.pathname,e=t.substring(t.lastIndexOf("/")+1),o=["all","/","cart","search"];if(e&&!o.includes(e)&&t.includes("products/"))return!0;return!1}()&&window.selected_variant?window.selected_variant:"")}const H=()=>{let t="https://unpkg.com/dayjs@1.10.4";[`${t}/dayjs.min.js`].map((e=>{var o=document.createElement("script");o.setAttribute("src",`${e}`),o.defer=!0,o.addEventListener("load",(function(){["plugin/utc.js","plugin/timezone.js","locale/de.js","locale/nl.js","locale/fr.js","locale/es.js","locale/et.js","locale/ja.js","locale/it.js","locale/sk.js","locale/sl.js","locale/fi.js","locale/sv.js","locale/lv.js","locale/da.js","locale/is.js","locale/ca.js","locale/nb.js","locale/pt.js","locale/bg.js","locale/ar.js","locale/ru.js","locale/zh-tw.js"].map((e=>{var o=document.createElement("script");o.defer=!0,o.setAttribute("src",`${t}/${e}`),document.body.appendChild(o)}))}),!1),document.body.appendChild(o)}))};function z(t,e){window.sessionStorage.setItem(t,e)}async function G(t=""){const e=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});return{data:await e.json()}}async function D(){let t=await(async(t,e)=>{let o={"de-DE":"de","ro-RO":"ro","bg-BG":"bg","zh-TW":"zh-tw","da-Dansk":"da","et-EE":"et",nb:"no"},n=window.Shopify&&window.Shopify.locale?window.Shopify.locale:"en";if(o[n]&&(n=o[n]),"i-stra-exclusive-day-tours.myshopify.com"===e){let t=splitHostname();t.subdomain&&"www"!==t.subdomain&&(n=t.subdomain)}return{data:{...(await G(`${t}/scripttag/locale_strings?locale=${n}&shopify_domain=${e}`)).data,locale:n}}})(y,b);window.Appointo={translations:t.data},f=window.Appointo.translations}function F(t=!1){return G(`${y}/scripttag/product?shop=${b}&product_uuid=${w.product.id}&force_check=true`).then((async e=>{for(W(),g=e.data.appointments,_=e.data.goto_flow,v=e.data.cart_button_meta,j=e.data.activate_text,S="multi_day"===e.data.scenario,T=!t&&e.data.has_subscriptions,I=t,e.data.calendar_version&&(L="v2"===e.data.calendar_version?"https://app.appointo.me/popups-main-v2.js":"https://app.appointo.me/popups-main.js");;){if(window.dayjs_plugin_utc&&window.dayjs_plugin_timezone){console.log("no delay");break}console.log("dayjs delay"),await M(50)}var o,n;if(S)for((o=document.createElement("script")).defer=!0,o.setAttribute("src"," https://cdnjs.cloudflare.com/ajax/libs/litepicker/2.0.11/litepicker.umd.min.js"),o.addEventListener("load",(function(){$=!0})),document.head.appendChild(o);!$;)console.log("litepicker delay"),await M(50);j&&((o=document.createElement("script")).defer=!0,o.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.9.23/libphonenumber-js.min.js"),document.head.appendChild(o));for(n=f.locale,dayjs.locale(n);;){if(f.locale){console.log("no delay");break}console.log("locale delay"),await M(50)}if(h=N(),h||(h=w.product.variants[0].id),await async function(t){let e=await G(`https://app.appointo.me/scripttag/selling_plan_group?duration_uuid=gid://shopify/ProductVariant/${t}&&shopify_domain=${b}`);return q=e.data,q}(h),console.log("come here",w),!g.length&&w.product.selling_plan_groups&&0===w.product.selling_plan_groups.length&&0===q.length)return Promise.resolve();z("customer_uuid",function(t,e){for(var o="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,i=0;i<e;i++)o+=n.charAt(Math.floor(Math.random()*a));return`${t}_${o}`}(b,6)),z("currentProductId",w.product.id);let a=[];if(v&&v.querySelector){const t=document.querySelectorAll(v.querySelector);t.length>0&&(C=t[0],a=t)}else for(let t=0;t<R.length;t++){const e=document.querySelectorAll(R[t]);if(e.length>0){C=e[0],a=e;break}}if(e.data.global_css){var i=document.createElement("style");i.innerHTML=e.data.global_css,document.head.appendChild(i)}let r=B.includes(w.product.id)||O.includes(b);if(window.shopify_product=w,window.appointments=g,window.addToCartBtn=C,C&&T){window.money_format=e.data.money_format.replace("{{amount}}","0.00"),h=N(),h||(h=w.product.variants[0].id);let t=w.product.variants.find((t=>`${t.id}`==`${h}`)),o=null;for(P=!0,function(){if(window.jQuery&&m(window.jQuery.fn.jquery,"1.7"))window.$||(window.$=window.jQuery),console.log("jquery present",window.jQuery.fn.jquery,window.$);else{var t=document.createElement("script");t.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"),t.async=!0,t.addEventListener("load",(function(){}),!1),document.body.appendChild(t)}}(),await J(e,!0);;){if(window.$){console.log("no jquery delay");break}console.log("jquery delay"),await M(50)}window.initSubscription({addToCartBtn:C,variants:w.product.variants,product:w.product,selected_selling_plan_group:o,price:t.price,variant:h,createSub:!0,appt_present:g.length>0,one_time_counts:q,has_subscriptions:T})}if(0===g.length)return;if("embed"===A||t);else if(C&&!r){let t=C.classList.value.replace("ajax-submit","");x=f.scheduleTime;let e="",o=".shopify-payment-button";if(v&&v.class&&(t=v.class),v&&v.title&&(x=v.title),v&&v.style&&(e=v.style),v&&v.buybtn_selector&&(o=v.buybtn_selector),"cart_v2"===_){C.insertAdjacentHTML("beforebegin",`<div id="appointo-btn" style="${e} margin-bottom: 10px" class="${t}">${x}</div>`);const o=["arride-bikes.myshopify.com"];let n=function(){let t=[];for(var e=document.body.getElementsByTagName("form"),o=e.length,n=0;n<o;n++)if(null!=e[n].getAttribute("action")){var a=e[n].getAttribute("action");("/cart/add"===a||a.includes("/cart/add"))&&t.push(e[n])}return t}();n.length>0&&!o.includes(b)?n.map((t=>{t.addEventListener("click",(function(t){let e=!1;if(Array.from(a).forEach((o=>{o.contains(t.target)&&(e=!0)})),e){let e=((t,e)=>{let o=document.querySelectorAll('[name*="properties"]');for(let t=0;t<o.length;t++){const n=o[t].name.replace("properties[","").replace("]",""),a=o[t].value;e[n]=a}return e})(0,{}),o=!1;if(e.hasOwnProperty("_start_time")&&e.hasOwnProperty("_timezone")&&(o=!0),o)document.getElementById("appointo-date-error").remove();else{document.getElementById("appointo-date-error")||document.getElementById("appointo-btn").insertAdjacentHTML("afterend",'<div id="appointo-date-error" class="appointo-date-error">Please select a date before adding this item to cart</div>'),t.stopImmediatePropagation(),t.preventDefault()}}}),!0)})):console.log("form not found")}else C.insertAdjacentHTML("afterend",`<div id="appointo-btn" style="${e}" class="${t}">${x}</div>`),C.remove();setTimeout((()=>{if(v&&!v.show_buy_btn){let t=document.querySelectorAll(o);t.length&&t[0].remove()}}),1e3)}else{if("tantalus-vineyard.myshopify.com"===b)return;k=!0}if(k){let t=document.createElement("div");t.innerHTML=`<button id="appointo-btn" class="appointo-check-avail appointo-tooltip"><img src="https://appointment-booking-shopify.s3.ap-south-1.amazonaws.com/icon.png" class="appointo-icon"/><span class="appointo-tooltiptext" id="appointo-tooltip">${f.selectTime}</span></button>`,document.body.appendChild(t)}let l=document.getElementById("appointo-btn");t?J(e,!1):["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?"embed"!==A?(l.onclick=async()=>{J(e,!1)},P||J(e,!0)):J(e,!1):k?(l.onclick=async()=>{J(e,!1)},J(e,!1)):"embed"!==A?l.onclick=async()=>{J(e,!1)}:J(e,!1)}))}function J(t,e){return new Promise((o=>{if(E){let e={...t.data,shopify_product:w,calendar_type:A,toolTip:k,addToCartBtn:C,pandabot:I};"fiber-cutter.myshopify.com"===b&&(e.overrideDomain=!0,e.shopify_domain="omtech-laser.myshopify.com"),window.showAppointoModal(e),o()}else{let n=[L];if(!k){let t=document.getElementById("appointo-btn");t&&(t.innerHTML=f.loadingCalendar?`${f.loadingCalendar}...`:"Loading Calendar...",t.style.opacity=.5)}n.map((n=>{var a=document.createElement("script");a.setAttribute("src",`${n}`),a.defer=!0,a.addEventListener("load",(function(){if(!k){let t=document.getElementById("appointo-btn");t&&(t.innerHTML=x,t.style.opacity=1)}if(E=!0,!e){let e={...t.data,shopify_product:w,calendar_type:A,toolTip:k,addToCartBtn:C,pandabot:I};"fiber-cutter.myshopify.com"===b&&(e.overrideDomain=!0,e.shopify_domain="omtech-laser.myshopify.com"),window.showAppointoModal(e)}o()}),!1),document.body.appendChild(a)}))}}))}window.InitFromAdmin=async function(t){return f.locale||D(),H(),w={product:t},F(!0)},window.InitFromPandaBot=async function(t){console.log("handle is",t),fetch(`${window.Shopify.routes.root||"/"}products/${t}.js`,{method:"GET",headers:{Accept:"application/json"}}).then((t=>404!==t.status?t.clone().json():{status:404})).then((t=>{if(404!==t.status)return f.locale||D(),H(),w={product:t},F(!0)}))},window.Shopify&&window.location.pathname.includes("/cart")&&(s(),p());let Q=["test-mastersha.myshopify.com","olivia-may.myshopify.com","frama-b2c.myshopify.com"];window.Shopify&&window.location.pathname.includes("/account")&&(Q.includes(b)||async function(){let e=document.querySelector('[href="/account/logout"]'),o=ShopifyAnalytics.meta.page.customerId;e&&o&&async function(t=""){const e=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});return{data:await e.json()}}(`https://app.appointo.me/scripttag/cp_token_by_id?customer_id=${o}&shopify_domain=${t}`).then((n=>{let a=`/apps/customer_portal?customer_id=${o}&shopify_domain=${t}`;n&&n.data&&n.data.appointo_token&&(a=`/apps/customer_portal?appointo_key=${n.data.appointo_token}`);var i=document.createElement("div");i.innerHTML=`<a target="_blank" href="${a}">\n        <button class="btn" style="padding: 10px 20px;margin:0 0 20px 0">My Bookings</button>\n      </a>`,e.parentElement.parentNode.insertBefore(i,e.parentElement.nextSibling)}))}());const R=[".appointo-custom-btn",".pagefly-booking-sidepanda",".product-buy-buttons--cta",".payment-and-quantity__add .product-add",".atc-btn-container .add_to_cart","#product-add-to-cart",".productForm-submit",".gPreorderAddToCartBtn",".ProductForm__AddToCart",".product-form__cart-submit",".lh-add_to_cart",".atc-btn-container .add_to_cart",".add-to-cart-btn",".product__add-to-cart",".product__add-to-cart-button","#add-to-cart","#AddToCart--product-template","#addToCart","#AddToCart-product-template","#AddToCart",'[data-add-to-cart="Add to cart"]','[data-label="Add to Cart"]','[data-label="Add to cart"]',".add_to_cart",".product-form--atc-button",".product-form--add-to-cart","#AddToCart-product",".AddtoCart","button.btn-addtocart",".product-submit",'[value="Add to Cart"]','[aria-label="Add to cart"]',"[data-action='add-to-cart']",'[name="add"]',"#signpanda-btn"];let U=window.Shopify?window.Shopify.shop:"";function W(){for(let t=0;t<R.length;t++){const e=document.querySelectorAll(R[t]);for(let t=0;t<e.length;t++){e[t].style.display="block"}}const t=document.querySelectorAll(".shopify-payment-button");t.length&&(t[0].style.display="block")}["galenic.myshopify.com"].includes(U)||function(){for(let t=0;t<R.length;t++){const e=document.querySelectorAll(R[t]);for(let t=0;t<e.length;t++)e[t].style.display="none"}const t=document.querySelectorAll(".shopify-payment-button");t.length&&(t[0].style.display="none")}(),setTimeout((()=>{W()}),1500),function(){const t=window.location.pathname,e=t.substring(t.lastIndexOf("/")+1);if(e&&!["all","/","cart","search"].includes(e)&&t.includes("products/"))return fetch(`${window.Shopify.routes.root||"/"}products/${e}.js`,{method:"GET",headers:{Accept:"application/json"}});{let t=document.getElementsByClassName("appointo-custom-btn");if(t&&t.length>0){let e=t[0].getAttribute("data-appointo-product-handle"),o=t[0].getAttribute("type");return A=o||"popup",fetch(`${window.Shopify.routes.root||"/"}products/${e}.js`,{method:"GET",headers:{Accept:"application/json"}})}}return Promise.resolve({status:404})}().then((async t=>{if(404!==t.status)return t.clone().json();{let t=document.getElementsByClassName("appointo-widget");if(t&&t.length>0)return f.locale||D(),H(),[L].map((e=>{var o=document.createElement("script");o.setAttribute("src",`${e}`),o.defer=!0,o.addEventListener("load",(async function(){for(;;){if(window.dayjs_plugin_utc&&window.dayjs_plugin_timezone){console.log("no delay");break}console.log("dayjs delay"),await M(50)}window.initWidget({element:t[0]})}),!1),document.body.appendChild(o)})),{status:404};let e=function(){let t=[];const e=["form[action$='/cart/add'][method='post']",'form[data-type="add-to-cart-form"]',".ajax-product-form",".product-single__form","#addtc-sticky-bar",".cow-form"];return document.querySelectorAll(e.join(", ")).forEach((function(e){for(let o=0;o<R.length;o++)if(e.querySelectorAll('[name="id"]').length>0&&e.querySelectorAll(R[o]).length>0){t.push(e);break}})),t}(),o={},n=[];e.map((t=>{let e=t.querySelectorAll('[name="id"]')[0].value;n.push(e),o[e]=t}));let a={shopify_domain:b,variant_ids:n},i=await async function(t="",e={}){const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return 204===o.status?{data:{}}:{data:await o.json()}}(`${y}/scripttag/check_variants`,a),r=i.data&&i.data.pds&&i.data.pds.length>0?i.data.pds:[];if(r&&r.length>0){let t=!1;for(t||(H(),D(),t=!0);;){if(f.locale){console.log("no delay");break}console.log("locale delay"),await M(50)}r.map((async(t,e)=>{if(t.valid&&t.product_handle){w={};let n=null,a=[],r=o[t.variant_uuid];for(let t=0;t<R.length;t++){const e=r.querySelectorAll(R[t]);if(e.length>0){n=e[0],a=e;break}}v=i.data.cart_button_meta;let l=n.classList.value.replace("ajax-submit","");x=f.scheduleTime;let s="",c=".shopify-payment-button";v&&v.class&&(l=v.class),v&&v.title&&(x=v.title),v&&v.style&&(s=v.style),v&&v.buybtn_selector&&(c=v.buybtn_selector),n.insertAdjacentHTML("afterend",`<div id="appointo-btn-${e}" style="${s}" class="${l}">${x}</div>`);let d=document.getElementById(`appointo-btn-${e}`);if(d.onclick=async()=>{let e=r.querySelectorAll('[name="id"]');if(e.length>0){let t=e[0].value;window.selected_variant=t}window.InitFromPandaBot(t.product_handle),d.innerHTML=f.loadingCalendar?`${f.loadingCalendar}...`:"Loading Calendar...",d.style.opacity=.5,setTimeout((()=>{d.innerHTML=x,d.style.opacity=1}),2e3)},v&&!v.show_buy_btn){let t=r.querySelectorAll(c);t.length&&t[0].remove()}n.remove()}}))}}return{status:404}})).then((t=>{if(404!==t.status)return H(),D(),window.selected_variant="",w={product:t},F()}))}()}();