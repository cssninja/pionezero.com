<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="" />

    <title>Sports App</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- added, from offcanvaspush -->
    <link href="../css/jasny-bootstrap.min.css" rel="stylesheet">

    <!-- added, from offcanvaspush -->
    <link href="../css/navmenu-push.css" rel="stylesheet">

    <!-- just for debugging purposes -->
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- html5 shim and respond.js ie8 support of html5 elements and media queries -->

      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <script src="../js/tasks.js"></script>
    <![endif]-->

    <link href="../css/carousel.css" rel="stylesheet">

    <!-- zocial footer icons -->
    <link href="../css/zocial.css" rel="stylesheet" type="text/css"/>

    <!-- pinterest-like gallery styles -->
    <link href="../css/essential.css" rel="stylesheet">

    <style>
    /* added for demo mar 17 2024 .. sticky footer edit thanks to: https://dev.to/xinnks/multiple-ways-to-implement-sticky-footers-3o31 .. https://codepen.io/xinnks/pen/YzpBrJW */
		.newcon {
			position: relative;
			display: block;
			height: 55%
		}
		@media (max-width: 1024px) {
		  .newcon {
			  position: relative;
			  display: block;
			  height: 65%
		  }
		}
		@media (max-width: 550px) {
		  .newcon {
			  position: relative;
			  display: block;
			  height: 40%
		  }
		}
		/* .marketing {
			max-height: 10vh;
		} */
		#outer {
			position: absolute !important;
			bottom: 0 !important;
			width: 100%;
		}

		.disa {
			opacity: 0.4;
			pointer-events:none
		}

	  </style>

  </head>

  <body id="top" style="background-color:#2a2d2f;" class="ftbackg">




<!-- ```````````````````````````` navbar begin, added, from offcanvaspush -->
    <div class="bg-fix">
    <!-- logo (added) -->
        <div id="hide" class="navmenu navmenu-default navmenu-fixed-left offcanvas" style="background-color:#191A1C !important;border-color:#191A1C !important;overflow-x:scroll;-webkit-overflow-scrolling:touch;">
          <a class="navmenu-brand" href="#" style="font-weight:bold;color:#8a8f94 !important;pointer-events:none;">Sports App</a>
          <div style="margin-bottom:60px !important;"></div>
          <ul class="nav navmenu-nav lato" style="font-size:1.4em;" id="main_menu">
            <li><!-- <a href="#" form="home" onClick="S_LoadForm('home')">&nbsp; --> <a href="../index.html">Home</a></li>
            <li><a href="../thumbnails_new.html">Player Thumbs</a></li>
  	        <li><a href="../playerstats_new.html">Player Stats</a></li>
  	        <li><a href="../profile_new.html">Profile</a></li>
            <li class="disa"><a href="#" form="create_entry" onClick="S_LoadForm('create_entry')">Create Player</a></li>
            <li class="disa"><a href="#" form="edit_entry" onClick="S_LoadForm('edit_entry')">Edit Player</a></li>
            <li class="disa"><a href="#" form="delete_entry" onClick="S_LoadForm('delete_entry')">Delete Player</a></li>
            <li class="disa"><a href="#" form="upload_ss" onClick="S_LoadForm('upload_ss')">Upload CSV</a></li>
            <li class="disa"><a href="#" form="upload_img" onClick="S_LoadForm('upload_img')">Upload Image</a></li>
            <!-- <li><a href="#" form="view_thumbs" onClick="S_LoadForm('view_thumbs')">Player Thumbs</a></li> -->
            <li><a href="../help.html">Docs</a></li>
            <li><a href="#" form="logout" onClick="S_LoadForm('logout')">Logout</a></li>
          </ul>
    </div>

    <!-- note: max-width: zero to xx px, min-width: starting from xx px; and border is top, left/right, bottom -->
        <div class="navbar navbar-default navbar-fixed-top" style="background:transparent !important;border-width:0 0 0px !important;">
          <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".navmenu" data-canvas="body" style="border-color:#60656A !important;">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
    </div>

<!-- ```````````````````````````` navbar end -->



		<!-- new container -->
		<div class="newcon">

    <div class="container marketing">
		<div class="wrapper" style="margin-top:120px !important;" id="content"></div>
	</div>





<!-- ```````````````````````````` footer begin -->
        <!-- ` ` ` ` ` ` ` ` ` ` ` `      FOOTER GEARED TO SOCIAL ENGAGEMENT      ` ` ` ` ` ` ` ` ` ` ` ` -->
        <!-- sticky footer shell -->
        <div id="outer">

        <!-- footer -->
	<div id="footer">
		
        <div id="S_OnlineStatus"></div>
        
        <!-- zocial buttons - http://zocial.smcllns.com - by Sam Collins (@smcllns) .. make sure all fonts are loaded, see zocial.css -->
	  <div class="follow_us">
		<a href="mailto:pionezero@hush.com" class="zocial email"></a>
              <a href="#" class="zocial facebook"></a>
              <a href="#" class="zocial twitter"></a>
	  </div>

	</div>

        <!-- sticky footer solution using #outer, .footer and .push, http://ryanfait.com/sticky-footer/ -->
        <div class="push"></div>

        <!-- end outer, sticky footer shell -->
        </div>
<!-- ```````````````````````````` footer end -->

</div>


<!-- ```````````````````````````` bootstrap core js begin -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
    <script type="text/javascript">$j = jQuery.noConflict();</script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/docs.min.js"></script>
    <!-- added, from offcanvaspush -->
    <script src="../js/jasny-bootstrap.min.js"></script>
<!-- ```````````````````````````` bootstrap core js end -->

<script src="../js/localstorage.js"></script>




<!-- SMOOTH SCROLLING begin, from http://css-tricks.com/snippets/jquery/smooth-scrolling/ -->
<script>
$j(function() {
  $j('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $j(this.hash);
      target = target.length ? target : $j('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $j('html,body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
});
</script>
<!-- smooth scrolling end -->


<script>
	$j(document).ready(function() {
		
		

		/**
		
			Local Storage
		
		*/
		var S_Connected 		= function(e) { LS_UpdateOnlineStatus(); }
		var S_Disconnected		= function(e) { LS_UpdateOnlineStatus(); }
		var S_UploadLSRecords	= function(e) { 
			
			var records = LS_GetAllRecords();
			
			for(var i=0; i<records.length; i++) {
				var record 	= records[i];
				
				var r = new Object();
				
				for(var j=0; j<record.length; j++) {
					r[record[j][0]] = record[j][1];
				}
			}
			
			var r = encodeURIComponent(JSON.stringify(r));
			
			$j.ajax({
				method:		'POST',
				url:		'../ajax/LocalStorageUpload.php',
				data:		'stats=' + r,
				success:	function(d) {
					LS_EmptyStorage();
				}
			});
			
		}
		
		var opts					= new Object();
			opts.indicator			= 'S_OnlineStatus';
			opts.OnlineCallback		= S_Connected;
			opts.OfflineCallback	= S_Disconnected;
			opts.UploadRecords		= S_UploadLSRecords;
			
		LS_Init(opts);



		/**
		
			Application
		
		*/
		
		//create player
		S_SubmitStats = function() {
		
			var a 		= [];
			var tmpLS	= [];
		
			$j('#content input[type=text]').each(function(i) {

				tmpLS.push([$j(this).prev('label').html().replace(/\s/g, ''), $j(this).val().replace(/\s{2,}/g, ' ')]);
								
				a.push($j(this).val().replace(/\s{2,}/g, ' '));
			});
			
			//local storage if offline
			if(LS_IsOnline() == false) {
				LS_StoreData(tmpLS, 'PlayerName');
			}
				
			//db if online
			else { 
				$j.ajax({
					method:		'POST',
					url:		'../ajax/SaveStats.php',
					data:		'stats=' + JSON.stringify(a),
					success:	function(d) { $j('#content').html(d);	}
				});
			}
		}
		
		
		//edit player
		S_SaveStats = function() {
			
			var a 			= new Object();
			var tmpLS		= [];
			a['PlayerID'] 	= $j('input[type=hidden]').val();
		
			$j('#content input[type=text]').each(function(i) {
				
				tmpLS.push([$j(this).prev('label').html().replace(/\s/g, ''), $j(this).val().replace(/\s{2,}/g, ' ')]);
								
				a[$j(this).prev('label').html().replace(/\s/g, '')] = $j(this).val().replace(/\s{2,}/g, ' ');
			});
			
			var pos = $j('#Position option:selected').val();
				
				tmpLS.push(['Position', pos]);
								
				a['Position'] = pos;

			

			//local storage if offline
			if(LS_IsOnline() == false)
				LS_StoreData(tmpLS, 'PlayerName');
				
				
			//db if online
			else {			
				$j.ajax({
					method:		'POST',
					url:		'../ajax/SaveStats.php',
					data:		'stats=' + encodeURIComponent(JSON.stringify(a)),
					success:	function(d) { $j('#content').html(d);	}
				});
			}
		}
		
		
		//pulls create player form
		S_CreatePlayer = function() {
				$j.ajax({
				method:		'POST',
				url:		'../forms/create_entry.php',
				success:	function(d) {
					try {
					
						d = $j.parseJSON(d);
						
						$j('#content').html('');
						
						var counter = 1;
						
						for(var i=0; i<d.length; i++) {

							var a = d[i];
							
							a = a.replace(/([a-z])([A-Z])/g, '$1 $2');
							
							if(i == 0) {
								var str = '<h1 class="home-space home-space2">Create A New Player</h1>'
										+ '<span class="lead lato-php lato-php2">Fill out one or more values below to create a new player</span><br/><br/>'
										+ '<form role="form" class="fieldwidth fieldwidth2" style="margin-bottom:30px;">';
							}
							else
								var str = '';
							
							//kill playerID field
							if(d[i] != 'PlayerID') {
								str = str + '<div class="form-group lead lato2 fieldwidth fieldwidth2"><label for="' + d[i] + '">' + a + '</label>'
									+ '<input type="text" class="form-control" id="' + d[i] + '" placeholder="' + d[i] + '">'
									+ '</div>';
							}
							
							$j('#content').append(str);

							counter++;
						}
						
						$j('#content').append('</form>');
						
						var btn 	= '<input type="button" class="btn btn-default" onClick="S_SubmitStats()" value="Save" />';
						
						$j('#content').append(btn);
						
					} catch(e) {
						$j('#content').html(d);
						return false;
					}
					
				}
			});
		}
		
		
		//pulls a specific player as form
		S_LoadPlayer = function(id) {
			$j.ajax({
				method:		'POST',
				url:		'../forms/edit_entry.php',
				data:		'data=' + id,
				success:	function(d) {
					try {
						
						d = $j.parseJSON(d);
						
						
						
						var str = '<h1 class="home-space home-space2">Edit Player Statistics</h1>'
								+ '<div class="lead lato-php lato-php2">'
								+ 'You can edit or remove any player statistic in this form except for the player\'s ID.  Click save at the bottom of the form to update this player.<br/><br/></div>';
						
						$j('#content').html(str);
						
						var counter = 1;
						var tmpLS	= [];
						
						for(var key in d) {
							var a = d[key];
							
							var field = a[0];
							
							a[0] = a[0].replace(/([a-z])([A-Z])/g, '$1 $2');
							a[1] = decodeURIComponent(a[1]);
							
							var str = a[1];
							
							str = G_ReplaceStr(str, '@label@', a[0]);
							
							$j('#content').append(str);
							
							var lastVal = $j('#content').find('.form-control:last').val();
							
							tmpLS.push([field, lastVal]);
							
							counter++;
						}
						
						//if(IsOnline == false)
							//LS_StoreData(tmpLS, 'Player Name');
						
						var btn 	= '<input type="button" class="btn btn-default" onClick="S_SaveStats()" value="Save" />';
						$j('#content').append(btn);

						
						
					} catch(e) { 
						$j('#content').html(d);
						return false;
					}
					
				}
			});
		}
		
		
		
		//deletes a player
		S_DeletePlayer = function(id) {
			if(!confirm('Are you sure you want to delete this player?'))
				return false;
				
			$j.ajax({
				method:		'POST',
				url:		'../ajax/DeletePlayer.php',
				data:		'pid=' + id,
				success:	function(d) {
					$j('#content').html(d);	
					
					setTimeout(function() { S_LoadForm('delete_entry'); }, 2000);
				}
			});
		}
		
		
		
		//dropdown to pick player position - if del = true then this will point to delete
		S_ChoosePosition = function(del) {
			
			del = (del == true) ? 1 : 0;
			
			$j.ajax({
				method:		'POST',
				url:		'../ajax/GetPlayerPositions.php',
				data:		'del=' + del,
				success:	function(d) {

					try 		{ d = $j.parseJSON(d); } 
					catch(e) 	{ alert('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + e + '</span>'); return false; }
					
					
					if(del == true) {
						var str = '<h1 class="home-space home-space2">Choose A Player To Delete</h1>'
								+ '<div class="lead lato-php lato-php2">'
								+ 'Choose a position below.  This will filter your players by the position you select to find them more quickly.'
								+ '<br/>Then select a player to delete.  This will remove any player from your applilcation. <br/><br/><br/><br/><br/></div>';

					}
					else {
						var str = '<h1 class="home-space home-space2">Choose A Player To Edit</h1>'
								+ '<div class="lead lato-php lato-php2">'
								+ 'Choose a position below.  This will filter your players by the position you select to find them more quickly.'
								+ '<br/>Then Select a player to edit, and their data will appear '
								+ 'in a form for you to maintain.  Once finished editing, click save at the bottom of the form<br/><br/><br/><br/></div>';
					}
						

					
					$j('#content').html(str);
					$j('#content').append(d);
					
				}
			});
			
		}
		
		
		
		//dropdown to pick player - if del = true then this will point to delete from
		S_ChoosePlayer = function(del, pos) {
			
			del = (del == true) ? 1 : 0;
			
			$j.ajax({
				method:		'POST',
				url:		'../ajax/GetAllPlayers.php',
				data:		'del=' + del + '&pos=' + pos,
				success:	function(d) {

					try 		{ d = $j.parseJSON(d); } 
					catch(e) 	{ alert('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + e + '</span>'); return false; }
					
					
					if(del == true) {
						var str = '<h1 class="home-space home-space2">Choose A Player To Delete</h1>'
								+ '<div class="lead lato-php lato-php2">'
								+ 'Choose a player below to delete.  This will remove any player from your applilcation. <br/><br/><br/><br/><br/></div>';

					}
					else {
						var str = '<h1 class="home-space home-space2">Choose A Player To Edit</h1>'
								+ '<div class="lead lato-php lato-php2">'
								+ 'Choose a player below to edit, and their data will appear '
								+ 'in a form for you to maintain.  Once finished editing, click save at the bottom of the form<br/><br/><br/><br/></div>';
					}
						

					
					$j('#content').html(str);
					$j('#content').append(d);
					
				}
			});
		}
		
		
		//shows home page
		S_GetHomePage = function() {
			$j.ajax({
				method:		'POST',
				url:		'../ajax/Home.php',
				success:	function(d) { $j('#content').html(d); }
			});
		}
		
		
		//highlights active menu link
		S_ChangeLinkMenuPointer = function(nav_item) {
			$j('#main_menu li a').each(function() {
				if($j(this).attr('form') != nav_item) 	{ $j(this).removeClass('menuspace'); }
				else 									{ $j(this).addClass('menuspace'); }
			});
		}
		
		
		//executes upload
		_S_DoUpload = function(files) {
			
			$j('#SN_DoUpload').on('click', function(event) { 
			 
			// Catch the form submit and upload the files
			  event.stopPropagation(); // Stop stuff happening
				event.preventDefault(); // Totally stop stuff happening
			 
				// START A LOADING SPINNER HERE
			 
				// Create a formdata object and add the files
				var data = new FormData();
				$j.each(files, function(key, value) {
					data.append(key, value);
				});
				
				$j.ajax({
					url: 			'../ajax/DoUpload.php?files',
					method: 		'POST',
					data: 			data,
					cache: 			false,
					dataType: 		'json',
					processData: 	false, // Don't process the files
					contentType: 	false, // Set content type to false as jQuery will tell the server its a query string request
					
					success: 		function(d) {
						
						
						try {
							if(parseInt(d) === 1)
								$j('#content').html('<h1 style="color: white;">Upload Successful</h1>');
						} catch(e) { $j('#content').html('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + d + '</span>'); }
					},
					
					error:			function(d) {
						if(d.reesponseText != undefined)
							$j('#content').html('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + d.responseText + '</span>');	
						else {
							$j('#content').html('<span class="lead lato-php lato-php2">Error: Most likely the filename is not named master.csv<br /><br /><br /><br /><br /><br /><br /><br /><br /></span>');
						}
					}
				});
			});
		}
		
		
		//pulls upload page
		S_UploadSpreadsheet = function() {
			$j.ajax({
				method:		'POST',
				url:		'../ajax/UploadSS.php',
				success:	function(d) {
					$j('#content').html(d);	
					
					// Variable to store your files
					var files;
					
					// Grab the files and set them to our variable
					prepareUpload = function(event) {
					  files = event.target.files;
					  $j('#SN_Filename').html(files[0].name + ' (' + files[0].size + 'k)');
				  
				  	  $j('#SN_DoUpload').show();
					  _S_DoUpload(files);
					  
					}

					// Add events
					$j('input[type=file]').on('change', prepareUpload);
				}
			});
		}
		
		
		
		//upload image
		_SN_DoUploadImg = function(files) {
			$j('#SN_DoUploadImg').on('click', function(event) { 

			// Catch the form submit and upload the files
			  event.stopPropagation(); // Stop stuff happening
				event.preventDefault(); // Totally stop stuff happening
			 
			 	var PlayerID = $j('#SNUI_Players option:selected').val();
			 
			 	//if user didnt choose a player yet kick the user out of upload process
			 	if(PlayerID == '' || PlayerID == undefined) {
					alert('You must choose a player to upload this image to!');
					return false;	
				}
				
				//prevent double form submission
				$j('#SN_DoUploadImg').attr('disabled', 'disabled');
				
				//show warning to user
				var str = 'Uploading image...do not leave this page yet.';
				$j('#SN_ImgWStatus').hide().html(str).fadeIn(400);
				
				
				// START A LOADING SPINNER HERE
			 
				// Create a formdata object and add the files
				var data = new FormData();
				$j.each(files, function(key, value) {
					data.append(key, value);
				});
				
				data.append('pid', PlayerID);
				
				$j.ajax({
					url: 			'../ajax/DoUploadImg.php?files',
					method: 		'POST',
					data: 			data,
					cache: 			false,
					dataType: 		'json',
					processData: 	false, // Don't process the files
					contentType: 	false, // Set content type to false as jQuery will tell the server its a query string request
					
					success: 		function(d) {
						try {
							if(parseInt(d) === 1) {
								var str = '<h1 style="color: white;">Image Upload Successful</h1>'
										+ '<a href="#" onClick="S_LoadPlayer(\'' + PlayerID + '\')">Edit This Player\'s Stats Now</a>';
								$j('#content').hide().html(str).fadeIn(400);
							}
						} catch(e) { $j('#content').html('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + d + '</span>'); }
					},
					
					error:			function(d) {
						if(d.reesponseText != undefined)
							$j('#content').html('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + d.responseText + '</span>');	
						else {
							$j('#content').html('<span class="lead lato-php lato-php2">Error:<br /><br /><br /><br /><br /><br /><br /><br /><br /> ' + d + '</span>');
						}
					}
				});
			});
		}
		
		
		//pulls upload image page
		S_UploadImage = function() {
			$j.ajax({
				method:		'POST',
				url:		'../ajax/UploadImg.php',
				success:	function(d) {
					$j('#content').html(d);	
					
					// Variable to store your files
					var files;
					
					// Grab the files and set them to our variable
					prepareUpload = function(event) {
					  files = event.target.files;
					  $j('#SN_ImgFilename').html(files[0].name + ' (' + files[0].size + 'k)');
				  
				  	  $j('#SN_DoUploadImg').show();
					  _SN_DoUploadImg(files);
					  
					}

					// Add events
					$j('input[type=file]').on('change', prepareUpload);
				}
			});
		}
		
		
		
		S_ViewThumbnails 	= function() { window.location = '../index.php'; }
		S_Logout			= function() { window.location = '../login/logout.php'; }
		
		
		//triggered by nav item click
		S_LoadForm = function(form) {
			
			S_ChangeLinkMenuPointer(form);
							
			switch(form) {
				case 'home':			S_GetHomePage(); break;
				case 'create_entry': 	S_CreatePlayer(); break;
				//case 'edit_entry':		S_ChoosePlayer(); break;
				//case 'delete_entry':	S_ChoosePlayer(true); break;
				case 'edit_entry':		S_ChoosePosition(); break;
				case 'delete_entry':	S_ChoosePosition(true); break;
				case 'upload_ss':		S_UploadSpreadsheet(); break;
				case 'upload_img':		S_UploadImage(); break;
				case 'view_thumbs':		S_ViewThumbnails(); break;
				case 'logout':			S_Logout(); break;
				default:				S_CreatePlayer(); break;	
			}
			
		}
		
		//init
		S_LoadForm('home');
		//LS_EmptyStorage();
		
	});
</script>


    <!-- ============= MOSAIC SCRIPTS ============= -->
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> -->
    <script src="../js/jquery.mosaicflow.js"></script>

</body>
</html>
